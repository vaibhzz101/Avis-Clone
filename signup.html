<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up to Avis</title>
    <link rel="stylesheet" href="./style/signup.css">

</head>

<body>

    <div class="popup" id="popup">
        <div id="head">
            <div id="signUp_head">
                <h1>SIGN UP</h1>
                <h3>ALREADY REGISTERED?</h3>
                <a href="./Login.html">LOG IN</a>
            </div>
            <div id="cross-cont">
             <p id="cross" onclick="closePopup()">â¨‰</p>
            </div>
        </div>
      
     
        <form action="" id="form">

            <input type="text" placeholder="FIRST NAME" name="ffirst_name" id="firstname"><span id="first_error"></span>

            <input type="text" placeholder="LAST NAME" name="flast_name" id="lastname"><span id="last_error"></span>

            <input type="email" placeholder="email" name="femail" id="email"><span id="email_error"></span>

            <input type="number" placeholder="MOBILE NO." name="fmobile" id="mobile"><span id="mobile_error"></span>

            <input type="date" placeholder="DOB" name="fbirth_date" id="birthdate"><span id="date_error"></span> <br>

            <input type="radio" name="gender" id="gender" value="male"><label for="">MALE</label><br>
            <input type="radio" name="gender" id="gender" value="female"><label for="">FEMALE</label><br>
            <span id="gender_error"></span>

            <input type="password" placeholder="PASSWORD" name="fpassword" id="password"><span
                id="password_error"></span>

            <input type="password" placeholder="CONFIRM PASSWORD" name="fcpasspwrd" id="cpassword"><span
                id="cpassword_error"></span>

            <input id="signup_but" type="submit" value="SIGN UP">
        </form>
        <h3 id="or">---OR---</h3>
        <div id="Fb_Gog_but">

            <button id="google">
                <div>
                    <b>
                        <p>G</p>
                    </b>
                </div>
                <div class="anchor"><a href="">LOG IN WITH GOOGLE</a></div>
            </button>
            <button id="facebook">
                <div>
                    <b>
                        <p>f</p>
                    </b>
                </div>
                <div class="anchor"><a href="">LOG IN WITH FACEBOOK</a></div>
            </button>
        </div>


    </div>

    <button id="clickme" onclick="openPopup()">Click Me</button>
</body>
<script>

    let myform = document.getElementById("form")
    // let cpassword = document.getElementById("cpassword")

    let first_name_error = document.getElementById("first_error")
    let last_name_error = document.getElementById("last_error")
    let mobile_error = document.getElementById("mobile_error")
    let email_error = document.getElementById("email_error")
    let date_error = document.getElementById("date_error")
    let password_error = document.getElementById("password_error")
    let cpassword_error = document.getElementById("cpassword_error")
    let gender_error = document.getElementById("gender_error")

    myform.addEventListener("submit", (e) => {
        e.preventDefault();

        var userData = {
            firstname: myform.firstname.value,
            lastname: myform.lastname.value,
            email: myform.email.value,
            mobile: myform.mobile.value,
            DOB: myform.birthdate.value,
            gender: myform.gender.value,
            password: myform.password.value,

        }

        //    validation of form
        if (userData.firstname !== "" && userData.lastname !== "" && userData.email !== "" && userData.email !== "" && userData.mobile.length == 10 && userData.DOB !== "" && userData.gender !== "" && userData.password.length >= 6 && myform.cpassword.value == userData.password) {
            first_name_error.innerHTML = null; date_error.innerHTML = null; gender_error.innerHTML = null;
            last_name_error.innerHTML = null; password_error.innerHTML = null; cpassword_error.innerHTML = null;
            email_error.innerHTML = null; mobile_error.innerHTML = null;

            alert(`Hey ${userData.firstname} ${userData.lastname}! You Signed Up Successfully.`)
            SignUp_user(userData)

        } else {
            userData.firstname == "" ? first_name_error.innerHTML = "*Enter First Name!"
                : first_name_error.innerHTML = null;

            userData.lastname == "" ? last_name_error.innerHTML = "*Enter Last Name!"
                : last_name_error.innerHTML = null;

            userData.email == "" ? email_error.innerHTML = "*Enter Email!"
                : email_error.innerHTML = null;

            userData.mobile.length == 0 ? mobile_error.innerHTML = "*Enter Mobile Number!"
                : userData.mobile.length != 10 ? mobile_error.innerHTML = "*Mobile Number should be 10 digit."
                    : mobile_error.innerHTML = null;

            userData.DOB == "" ? date_error.innerHTML = "*Enter Date of Birth!"
                : date_error.innerHTML = null;
            userData.gender == "" ? gender_error.innerHTML = "*Fill the gender" : gender_error.innerHTML = null;

            userData.password.length == 0 ? password_error.innerHTML = "*Enter Password!"
                : userData.password.length < 6 ? password_error.innerHTML = "*Password length should be greater than or equal to 6."
                    : password_error.innerHTML = null;

            cpassword.value !== userData.password ? cpassword_error.innerHTML = "*Password & confirm password must be equal!"
                : cpassword_error.innerHTML = null;
        }


    })


    function SignUp_user(obj) {
        fetch("https://63c67422dcdc478e15c1bf8d.mockapi.io/users", {
            method: "POST",
            headers: { 'content-type': 'application/json' },
            body: JSON.stringify(obj)
        }
        )
            .then(responseObject => responseObject.json())
            .then((data) => {
                console.log(data)
                location.href = "./login.html"
            })
    }



    let popup = document.getElementById("popup");

    function openPopup() {
      popup.classList.add("open-popup");
    }
    function closePopup() {
      popup.classList.remove("open-popup");
    }



</script>

</html>